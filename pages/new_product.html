<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novo Produto</title>
    <link rel="stylesheet" href="../css/login.css">
</head>
<body>

    <div id="box">
    
        <h1>Registre um novo produto</h1>
        
        <form id="form">
        
            Nome:
            <input type="text" id="name" placeholder="Digite o nome do produto">
            
            <br><br>
            
            Preço:
            <input type="text" id="price" placeholder="Digite o preço do produto">
            
            <br><br>
            
            URL da Imagem:
            <input type="text" id="image_url" placeholder="Digite a URL da imagem do produto">
            
            <br><br><br><br>
            
            <button id="buttons" type="submit">Registrar</button>
            
            <br><br>
            
            <button><a href="login.html">Voltar</a></button>
            
        </form>
        
    </div>
    
    <script type="text/javascript" src="./jquery.js"></script>
    <script type="text/javascript">
  
		(async function () {
			$.ajaxSetup({
				async: true
			});
			await $('#form').submit(function (event) {
				const update = {
				    "name": $("#name").val(),
				    "price": $("#price").val(),
				    "image_url": $("#image_url").val()
				};
				$.ajax({
				    url: "https://godt-gp-website-git-main-patrickleonardo.vercel.app/new_product",
				    headers: { 'Content-Type': 'application/json' },
				    method: 'POST',
				    data: JSON.stringify(update),
				    success: function (data, textStatus, jqXHR) {
				        if (jqXHR.status === 200) {
				            window.location.href = '../index.html';
				        }
				    },
				    error: function (jqXHR, textStatus, errorThrown) {
    					if (jqXHR.status === 500) {
    						alert("Erro interno no servidor!")	
    					}
 					 }
				});
				event.preventDefault();
			});
		}());

    </script>
    
</body>
</html>
