<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="../css/login.css">
</head>
<body>

    <div id="box">

        <h1>Logue como Administrador</h1>

        <form id="form">

            Username: 
            <input type="text" name="user" id="user" placeholder="Digite seu nome"><br><br>

            Login:
            <input type="text" name="login" id="login" placeholder="Digite seu login"><br><br>

            Password:
            <input type="password" name="password" id="password" placeholder="Digite sua senha" ><br><br>
            
            <br><br>

            <input id="buttons" value="Entrar" onclick="enviarFormulario()">

            <br><br>
            
            <button><a href="../index.html">Voltar</a></button>
            
        </form>

    </div>
    
	<script type="text/javascript">
		async function enviarFormulario() {
		    const form = document.getElementById('form');
		    const user = form.user.value;
		    const login = form.login.value;
		    const password = form.password.value;

		    const data = {
		        user: user,
		        login: login,
		        password: password
		    };

		    try {
		        const response = await fetch('https://godt-gp-website-1z98hphdu-patrickleonardo.vercel.app/login', {
		            method: 'POST',
		            headers: {
		                'Content-Type': 'application/json;charset=UTF-8'
		            },
		            body: JSON.stringify(data)
		        });

		        if (response.status === 200) {
		            window.location.href = '../pages/new_product.html';
		        } else {
		            alert('Login ou Senha inválidos');
		        }
		    } catch (error) {
		        console.error('Erro:', error);
		        alert('Ocorreu um erro na solicitação.');
		    }
		}
	</script>

</body>
</html>
