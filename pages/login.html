<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="../css/login.css">
</head>
<body>

    <div id="box">
    
        <h1>Logue como Administrador</h1>
        <form id="form">
        
            Username:
            <input type="text" name="user" id="user" placeholder="Digite seu nome"><br><br>
            
            Login:
            <input type="text" name="login" id="login" placeholder="Digite seu login"><br><br>
            
            Password:
            <input type="password" name="password" id="password" placeholder="Digite sua senha">
            
            <br><br><br><br>
            
            <button id="buttons" type="submit">Entrar</button>
            
            <br><br>
            
            <button><a href="../index.html">Voltar</a></button>
            
        </form>
        
    </div>
	
    <script type="text/javascript" src="./jquery.js"></script>
    <script type="text/javascript">
  
		(async function () {
			$.ajaxSetup({
				async: true
			});
			await $('#form').submit(function (event) {
				const update = {
				    "user": $("#user").val(),
				    "login": $("#login").val(),
				    "password": $("#password").val()
				};
				$.ajax({
				    url: "https://godt-gp-website-git-main-patrickleonardo.vercel.app/login",
				    headers: { 'Content-Type': 'application/json' },
				    method: 'POST',
				    data: JSON.stringify(update),
				    success: function (data, textStatus, jqXHR) {
				        if (jqXHR.status === 200) {
				            window.location.href = '../pages/new_product.html';
				        }
				    },
				    error: function (jqXHR, textStatus, errorThrown) {
    					if (jqXHR.status === 401) {
    						alert("Campos incorreto!")	
    					}
 					 }
				});
				event.preventDefault();
			});
		}());

    </script>
    
</body>
</html>
